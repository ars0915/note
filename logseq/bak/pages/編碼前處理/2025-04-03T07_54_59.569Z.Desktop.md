# 時間戳與計時
	- 固定時鐘 steady clock: 系統啟動後的 ns，不能修改
	- 系統時鐘 system clock: 可修改、網路對時
	- RTCP 會定期發送 Sender Report，有每個音視頻的 timestamp 和 Network Time Protocol 時間戳，用來對齊音視頻
- # 旋轉角與朝向
	- 在圖像調整成自然方向前**需要**順時針旋轉的角度
	- 鏡像：
		- 自己看應該是照鏡子
		- 對方看應該像面對面
	- 後鏡頭的旋轉角為 90 度
	- 前鏡頭在預覽畫面時系統已經做了一次鏡像，對於旋轉角為 90 度的圖做鏡像後需要再轉 270 度才會是自然視角，所以前鏡頭的旋轉角為 270 度
	- 當順時針旋轉手機 X 度時，後鏡頭的圖像會逆時針旋轉 X 度
- # 前處理
	- 調整幀大小
		- 目標區域大小、縮放模式、縮放濾鏡算法
		- ![image.png](../assets/image_1740732458527_0.png)
		- 插值算法
	- 特效
		- 使用特效SDK會需要輸入旋轉角參數
		- 使用虛擬背景時需要將背景圖片逆向旋轉到和 frame 的方向相同
		- 虛擬表情的預覽時要讓用戶有照鏡子的效果，要額外做鏡向處理
	- HDR
	- 降噪
	- 鏡像
	- 水印
		- 分為明水印和暗水印，後者用來身份識別
	- 設置 SEI （Supplemental Enhancement Information）在視頻幀上附加補充信息
		- 包含 任意長度（通常不 > 4KB）的 Buffer、一個 timestamp
		- Buffer 太大 frame 可能被丟棄
		- 若 SEI timestamp 離 frame timestamp 太近，可認為 SEI 已過時（？
		- 沒有 frame 要發送又有 SEI 要送，需要模擬一個 I420 黑幀發送
- # 管理視頻幀
	- 首幀
		- 開始視頻採集的第一個 frame
		- 通常會有 OnFirstVideoFrame 事件可以接
		- 超過一段時間沒有首幀，要通知錯誤
		- 最開始時鏡頭可能剛啟動會亮度不足，可丟棄
	- 丟幀
	- 重複幀檢測
		- 比較前後兩幀 Y 的記憶體，透過memcmp
		- 計算前後兩幀的 Hamming Distance
		- 計算前後兩幀 Y 的 Mean Squared Error
	- 異常幀檢測
	- 幀率控制
		-
-